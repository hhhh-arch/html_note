var MindElixir=(()=>{var de=Object.defineProperty;var ht=Object.getOwnPropertyDescriptor;var pt=Object.getOwnPropertyNames;var ut=Object.prototype.hasOwnProperty;var ft=(e,t)=>{for(var n in t)de(e,n,{get:t[n],enumerable:!0})},mt=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of pt(t))!ut.call(e,o)&&o!==n&&de(e,o,{get:()=>t[o],enumerable:!(i=ht(t,o))||i.enumerable});return e};var gt=e=>mt(de({},"__esModule",{value:!0}),e);var zi={};ft(zi,{default:()=>D});var vt=Object.defineProperty,yt=(e,t,n)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J=(e,t,n)=>(yt(e,typeof t!="symbol"?t+"":t,n),n),be={name:"Latte",type:"light",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--node-gap-x":"30px","--node-gap-y":"10px","--main-gap-x":"65px","--main-gap-y":"45px","--root-radius":"30px","--main-radius":"20px","--root-color":"#ffffff","--root-bgcolor":"#4c4f69","--root-border-color":"rgba(0, 0, 0, 0)","--main-color":"#444446","--main-bgcolor":"#ffffff","--topic-padding":"3px","--color":"#777777","--bgcolor":"#f6f6f6","--selected":"#4dc4ff","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea","--map-padding":"50px"}},we={name:"Dark",type:"dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--node-gap-x":"30px","--node-gap-y":"10px","--main-gap-x":"65px","--main-gap-y":"45px","--root-radius":"30px","--main-radius":"20px","--root-color":"#ffffff","--root-bgcolor":"#2d3748","--root-border-color":"rgba(255, 255, 255, 0.1)","--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--topic-padding":"3px","--color":"#cccccc","--bgcolor":"#252526","--selected":"#4dc4ff","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969","--map-padding":"50px 80px"}};function ne(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}var ie=function(e,t){if(t.id===e)return t;if(t.children&&t.children.length){for(let n=0;n<t.children.length;n++){let i=ie(e,t.children[n]);if(i)return i}return null}else return null},P=(e,t)=>{if(e.parent=t,e.children)for(let n=0;n<e.children.length;n++)P(e.children[n],e)},Y=(e,t,n)=>{if(e.expanded=t,e.children)if(n===void 0||n>0){let i=n!==void 0?n-1:void 0;e.children.forEach(o=>{Y(o,t,i)})}else e.children.forEach(i=>{Y(i,!1)})};function xe(e){if(e.id=I(),e.children)for(let t=0;t<e.children.length;t++)xe(e.children[t])}function oe(e,t,n,i){let o=i-t,r=e-n,s=Math.atan(Math.abs(o)/Math.abs(r))/3.14*180;if(isNaN(s))return;r<0&&o>0&&(s=180-s),r<0&&o<0&&(s=180+s),r>0&&o<0&&(s=360-s);let l=12,a=30,d=s+a,h=s-a;return{x1:n+Math.cos(Math.PI*d/180)*l,y1:i-Math.sin(Math.PI*d/180)*l,x2:n+Math.cos(Math.PI*h/180)*l,y2:i-Math.sin(Math.PI*h/180)*l}}function I(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}var bt=function(){let e=I();return{topic:this.newTopicName,id:e}};function Se(e){return JSON.parse(JSON.stringify(e,(t,n)=>{if(t!=="parent")return n}))}var H=(e,t)=>{let n=0,i=0;for(;t&&t!==e;)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{offsetLeft:n,offsetTop:i}},E=(e,t)=>{for(let n in t)e.setAttribute(n,t[n])},pe=e=>e?e.tagName==="ME-TPC":!1,ae=e=>e.filter(t=>t.nodeObj.parent).filter((t,n,i)=>{for(let o=0;o<i.length;o++){if(t===i[o])continue;let{parent:r}=t.nodeObj;if(r===i[o].nodeObj)return!1}return!0}),ze=e=>{let t=/translate\(([^,]+),\s*([^)]+)\)/,n=e.match(t);return n?{x:parseFloat(n[1]),y:parseFloat(n[2])}:{x:0,y:0}},Ee=function(e){for(let t=0;t<e.length;t++){let{dom:n,evt:i,func:o}=e[t];n.addEventListener(i,o)}return function(){for(let t=0;t<e.length;t++){let{dom:n,evt:i,func:o}=e[t];n.removeEventListener(i,o)}}},M=(e=>(e.LHS="lhs",e.RHS="rhs",e))(M||{}),wt=e=>{let t=e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},xt=e=>{let t=e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},St=e=>{e.selectNode(e.map.querySelector("me-root>me-tpc"))},Et=function(e,t){let n=t.parentElement.parentElement.parentElement.previousSibling;if(n){let i=n.firstChild;e.selectNode(i)}},Ct=function(e,t){let n=t.parentElement.nextSibling;if(n&&n.firstChild){let i=n.firstChild.firstChild.firstChild;e.selectNode(i)}},Le=function(e,t){var n,i;let o=e.currentNode||((n=e.currentNodes)==null?void 0:n[0]);if(!o)return;let r=o.nodeObj,s=o.offsetParent.offsetParent.parentElement;r.parent?s.className===t?Ct(e,o):(i=r.parent)!=null&&i.parent?Et(e,o):St(e):t===M.LHS?wt(e):xt(e)},Me=function(e,t){let n=e.currentNode;if(!n||!n.nodeObj.parent)return;let i=t+"Sibling",o=n.parentElement.parentElement[i];o?e.selectNode(o.firstChild.firstChild):e.selectNode(n)},re=function(e,t,n){let{scaleVal:i,scaleSensitivity:o}=e;switch(t){case"in":e.scale(i+o,n);break;case"out":e.scale(i-o,n)}};function Nt(e,t){t=t===!0?{}:t;let n=()=>{e.currentArrow?e.removeArrow():e.currentSummary?e.removeSummary(e.currentSummary.summaryObj.id):e.currentNodes&&e.removeNodes(e.currentNodes)},i=!1,o=null,r=l=>{let a=e.nodeData;if(l.key==="0")for(let d of a.children)Y(d,!1);if(l.key==="=")for(let d of a.children)Y(d,!0);if(["1","2","3","4","5","6","7","8","9"].includes(l.key))for(let d of a.children)Y(d,!0,Number(l.key)-1);e.refresh(),e.toCenter(),i=!1,o&&(clearTimeout(o),o=null,e.container.removeEventListener("keydown",r))},s={Enter:l=>{l.shiftKey?e.insertSibling("before"):l.ctrlKey?e.insertParent():e.insertSibling("after")},Tab:()=>{e.addChild()},F1:()=>{e.toCenter()},F2:()=>{e.beginEdit()},ArrowUp:l=>{if(l.altKey)e.moveUpNode();else{if(l.metaKey||l.ctrlKey)return e.initSide();Me(e,"previous")}},ArrowDown:l=>{l.altKey?e.moveDownNode():Me(e,"next")},ArrowLeft:l=>{if(l.metaKey||l.ctrlKey)return e.initLeft();Le(e,M.LHS)},ArrowRight:l=>{if(l.metaKey||l.ctrlKey)return e.initRight();Le(e,M.RHS)},PageUp:()=>e.moveUpNode(),PageDown:()=>{e.moveDownNode()},c:l=>{(l.metaKey||l.ctrlKey)&&(e.waitCopy=e.currentNodes)},x:l=>{(l.metaKey||l.ctrlKey)&&(e.waitCopy=e.currentNodes,n())},v:l=>{!e.waitCopy||!e.currentNode||(l.metaKey||l.ctrlKey)&&(e.waitCopy.length===1?e.copyNode(e.waitCopy[0],e.currentNode):e.copyNodes(e.waitCopy,e.currentNode))},"=":l=>{(l.metaKey||l.ctrlKey)&&re(e,"in")},"-":l=>{(l.metaKey||l.ctrlKey)&&re(e,"out")},0:l=>{if(l.metaKey||l.ctrlKey){if(i)return;e.scale(1)}},k:l=>{(l.metaKey||l.ctrlKey)&&(i=!0,o&&(clearTimeout(o),e.container.removeEventListener("keydown",r)),o=window.setTimeout(()=>{i=!1,o=null},2e3),e.container.addEventListener("keydown",r))},Delete:n,Backspace:n,...t};e.container.onkeydown=l=>{if(l.preventDefault(),!e.editable)return;let a=s[l.key];a&&a(l)}}function kt(e){let{dragMoveHelper:t}=e,n=p=>{var u,c,m;if(p.button!==0)return;if((u=e.helper1)!=null&&u.moved){e.helper1.clear();return}if((c=e.helper2)!=null&&c.moved){e.helper2.clear();return}if(t.moved){t.clear();return}let v=p.target;if(v.tagName==="ME-EPD")p.ctrlKey||p.metaKey?e.expandNodeAll(v.previousSibling):e.expandNode(v.previousSibling);else if(v.tagName==="ME-TPC"&&e.currentNodes.length>1)e.selectNode(v);else if(!e.editable)return;let g=(m=v.parentElement)==null?void 0:m.parentElement;g.getAttribute("class")==="topiclinks"?e.selectArrow(v.parentElement):g.getAttribute("class")==="summary"&&e.selectSummary(v.parentElement)},i=p=>{var u;if(!e.editable)return;let c=p.target;pe(c)&&e.beginEdit(c);let m=(u=c.parentElement)==null?void 0:u.parentElement;m.getAttribute("class")==="topiclinks"?e.editArrowLabel(c.parentElement):m.getAttribute("class")==="summary"&&e.editSummary(c.parentElement)},o=0,r=p=>{if(p.pointerType==="mouse")return;let u=new Date().getTime(),c=u-o;c<300&&c>0&&i(p),o=u},s=p=>{t.moved=!1;let u=e.mouseSelectionButton===0?2:0;if(p.button!==u&&p.pointerType==="mouse")return;t.x=p.clientX,t.y=p.clientY;let c=p.target;c.className!=="circle"&&c.contentEditable!=="plaintext-only"&&(t.mousedown=!0,e.map.style.transition="none",c.setPointerCapture(p.pointerId))},l=p=>{if(p.target.contentEditable!=="plaintext-only"){let u=p.clientX-t.x,c=p.clientY-t.y;t.onMove(u,c)}t.x=p.clientX,t.y=p.clientY},a=p=>{let u=e.mouseSelectionButton===0?2:0;if(p.button!==u&&p.pointerType==="mouse")return;let c=p.target;c.hasPointerCapture&&c.hasPointerCapture(p.pointerId)&&c.releasePointerCapture(p.pointerId),t.clear()},d=p=>{if(p.preventDefault(),p.button!==2||!e.editable)return;let u=p.target;pe(u)&&!u.classList.contains("selected")&&e.selectNode(u),setTimeout(()=>{e.dragMoveHelper.moved||e.bus.fire("showContextMenu",p)},200)},h=p=>{p.stopPropagation(),p.preventDefault(),p.ctrlKey||p.metaKey?p.deltaY<0?re(e,"in",e.dragMoveHelper):e.scaleVal-e.scaleSensitivity>0&&re(e,"out",e.dragMoveHelper):p.shiftKey?e.move(-p.deltaY,0):(e.map.style.transition="none",e.move(-p.deltaX,-p.deltaY),e.map.style.transition="transform 0.3s")},{container:f}=e;return Ee([{dom:f,evt:"pointerdown",func:s},{dom:f,evt:"pointermove",func:l},{dom:f,evt:"pointerup",func:a},{dom:f,evt:"pointerup",func:r},{dom:f,evt:"click",func:n},{dom:f,evt:"dblclick",func:i},{dom:f,evt:"contextmenu",func:d},{dom:f,evt:"wheel",func:typeof e.handleWheel=="function"?e.handleWheel:h}])}function _t(){return{handlers:{},addListener:function(e,t){this.handlers[e]===void 0&&(this.handlers[e]=[]),this.handlers[e].push(t)},fire:function(e,...t){if(this.handlers[e]instanceof Array){let n=this.handlers[e];for(let i=0;i<n.length;i++)n[i](...t)}},removeListener:function(e,t){if(!this.handlers[e])return;let n=this.handlers[e];if(!t)n.length=0;else if(n.length)for(let i=0;i<n.length;i++)n[i]===t&&this.handlers[e].splice(i,1)}}}var se=document,Tt=function(){this.nodes.innerHTML="";let e=this.createTopic(this.nodeData);Ce(e,this.nodeData),e.draggable=!1;let t=se.createElement("me-root");t.appendChild(e);let n=this.nodeData.children||[];if(this.direction===2){let i=0,o=0;n.map(r=>{r.direction===0?i+=1:r.direction===1?o+=1:i<=o?(r.direction=0,i+=1):(r.direction=1,o+=1)})}At(this,n,t)},At=function(e,t,n){let i=se.createElement("me-main");i.className=M.LHS;let o=se.createElement("me-main");o.className=M.RHS;for(let r=0;r<t.length;r++){let s=t[r],{grp:l}=e.createWrapper(s);e.direction===2?s.direction===0?i.appendChild(l):o.appendChild(l):e.direction===0?i.appendChild(l):o.appendChild(l)}e.nodes.appendChild(i),e.nodes.appendChild(n),e.nodes.appendChild(o),e.nodes.appendChild(e.lines)},Lt=function(e,t){let n=se.createElement("me-children");for(let i=0;i<t.length;i++){let o=t[i],{grp:r}=e.createWrapper(o);n.appendChild(r)}return n},T=document,Ue=function(e,t){let n=(this!=null&&this.el?this.el:t||document).querySelector(`[data-nodeid="me${e}"]`);if(!n)throw new Error(`FindEle: Node ${e} not found, maybe it's collapsed.`);return n},Ce=function(e,t){if(e.innerHTML="",t.style){let n=t.style;for(let i in n)e.style[i]=n[i]}if(t.dangerouslySetInnerHTML){e.innerHTML=t.dangerouslySetInnerHTML;return}if(t.image){let n=t.image;if(n.url&&n.width&&n.height){let i=T.createElement("img");i.src=n.url,i.style.width=n.width+"px",i.style.height=n.height+"px",n.fit&&(i.style.objectFit=n.fit),e.appendChild(i),e.image=i}}else e.image&&(e.image=void 0);{let n=T.createElement("span");n.className="text",n.textContent=t.topic,e.appendChild(n),e.text=n}if(t.hyperLink){let n=T.createElement("a");n.className="hyper-link",n.target="_blank",n.innerText="\u{1F517}",n.href=t.hyperLink,e.appendChild(n),e.link=n}else e.link&&(e.link=void 0);if(t.icons&&t.icons.length){let n=T.createElement("span");n.className="icons",n.innerHTML=t.icons.map(i=>`<span>${ne(i)}</span>`).join(""),e.appendChild(n),e.icons=n}else e.icons&&(e.icons=void 0);if(t.tags&&t.tags.length){let n=T.createElement("div");n.className="tags",n.innerHTML=t.tags.map(i=>`<span>${ne(i)}</span>`).join(""),e.appendChild(n),e.tags=n}else e.tags&&(e.tags=void 0)},Mt=function(e,t){let n=T.createElement("me-wrapper"),{p:i,tpc:o}=this.createParent(e);if(n.appendChild(i),!t&&e.children&&e.children.length>0){let r=Ne(e.expanded);if(i.appendChild(r),e.expanded!==!1){let s=Lt(this,e.children);n.appendChild(s)}}return{grp:n,top:i,tpc:o}},Dt=function(e){let t=T.createElement("me-parent"),n=this.createTopic(e);return Ce(n,e),t.appendChild(n),{p:t,tpc:n}},jt=function(e){let t=T.createElement("me-children");return t.append(...e),t},$t=function(e){let t=T.createElement("me-tpc");return t.nodeObj=e,t.dataset.nodeid="me"+e.id,t.draggable=this.draggable,t};function Ge(e){let t=T.createRange();t.selectNodeContents(e);let n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}var Ot=function(e){if(!e)return;let t=T.createElement("div"),n=e.text.textContent;e.appendChild(t),t.id="input-box",t.textContent=n,t.contentEditable="plaintext-only",t.spellcheck=!1;let i=getComputedStyle(e);t.style.cssText=`min-width:${e.offsetWidth-8}px;
  color:${i.color};
  padding:${i.padding};
  margin:${i.margin};
  font:${i.font};
  background-color:${i.backgroundColor!=="rgba(0, 0, 0, 0)"&&i.backgroundColor};
  border-radius:${i.borderRadius};`,this.direction===0&&(t.style.right="0"),Ge(t),this.bus.fire("operation",{name:"beginEdit",obj:e.nodeObj}),t.addEventListener("keydown",o=>{o.stopPropagation();let r=o.key;if(r==="Enter"||r==="Tab"){if(o.shiftKey)return;o.preventDefault(),t.blur(),this.container.focus()}}),t.addEventListener("blur",()=>{var o;if(!t)return;let r=e.nodeObj,s=((o=t.textContent)==null?void 0:o.trim())||"";s===""?r.topic=n:r.topic=s,t.remove(),s!==n&&(e.text.textContent=r.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:r,origin:n}))})},Ne=function(e){let t=T.createElement("me-epd");return t.expanded=e!==!1,t.className=e!==!1?"minus":"",t},R=document,A="http://www.w3.org/2000/svg",ue=function(e,t,n,i={}){let{anchor:o="middle",color:r,dataType:s}=i,l=document.createElementNS(A,"text");return E(l,{"text-anchor":o,x:t+"",y:n+"",fill:r||(o==="middle"?"rgb(235, 95, 82)":"#666")}),s&&(l.dataset.type=s),l.innerHTML=e,l},Xe=function(e,t,n){let i=R.createElementNS(A,"path");return E(i,{d:e,stroke:t||"#666",fill:"none","stroke-width":n}),i},G=function(e){let t=R.createElementNS(A,"svg");return t.setAttribute("class",e),t.setAttribute("overflow","visible"),t},De=function(){let e=R.createElementNS(A,"line");return e.setAttribute("stroke","#4dc4ff"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","2"),e.setAttribute("opacity","0.45"),e},Pt=function(e,t,n,i){let o=R.createElementNS(A,"g");return[{name:"line",d:e},{name:"arrow1",d:t},{name:"arrow2",d:n}].forEach((r,s)=>{let l=r.d,a=R.createElementNS(A,"path"),d={d:l,stroke:i?.stroke||"rgb(235, 95, 82)",fill:"none","stroke-linecap":i?.strokeLinecap||"cap","stroke-width":String(i?.strokeWidth||"2")};i?.opacity!==void 0&&(d.opacity=String(i.opacity)),E(a,d),s===0&&a.setAttribute("stroke-dasharray",i?.strokeDasharray||"8,2");let h=R.createElementNS(A,"path");E(h,{d:l,stroke:"transparent",fill:"none","stroke-width":"15"}),o.appendChild(h),o.appendChild(a),o[r.name]=a}),o},Je=function(e,t,n){if(!t)return;let i=R.createElement("div");e.nodes.appendChild(i);let o=t.innerHTML;i.id="input-box",i.textContent=o,i.contentEditable="plaintext-only",i.spellcheck=!1;let r=t.getBBox();i.style.cssText=`
    min-width:${Math.max(88,r.width)}px;
    position:absolute;
    left:${r.x}px;
    top:${r.y}px;
    padding: 2px 4px;
    margin: -2px -4px; 
  `,Ge(i),e.scrollIntoView(i),i.addEventListener("keydown",s=>{s.stopPropagation();let l=s.key;if(l==="Enter"||l==="Tab"){if(s.shiftKey)return;s.preventDefault(),i.blur(),e.container.focus()}}),i.addEventListener("blur",()=>{var s;if(!i)return;let l=((s=i.textContent)==null?void 0:s.trim())||"";l===""?n.label=o:n.label=l,i.remove(),l!==o&&(t.innerHTML=n.label,e.linkDiv(),"parent"in n?e.bus.fire("operation",{name:"finishEditSummary",obj:n}):e.bus.fire("operation",{name:"finishEditArrowLabel",obj:n}))})},Ht=function(e){let t=this.map.querySelector("me-root"),n=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,r=t.offsetHeight,s=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="";for(let l=0;l<s.length;l++){let a=s[l],d=a.querySelector("me-tpc"),{offsetLeft:h,offsetTop:f}=H(this.nodes,d),p=d.offsetWidth,u=d.offsetHeight,c=a.parentNode.className,m=this.generateMainBranch({pT:n,pL:i,pW:o,pH:r,cT:f,cL:h,cW:p,cH:u,direction:c,containerHeight:this.nodes.offsetHeight}),v=this.theme.palette,g=d.nodeObj.branchColor||v[l%v.length];if(d.style.borderColor=g,this.lines.appendChild(Xe(m,g,"3")),e&&e!==a)continue;let y=G("subLines"),b=a.lastChild;b.tagName==="svg"&&b.remove(),a.appendChild(y),Ze(this,y,g,a,c,!0)}this.renderArrow(),this.renderSummary(),this.bus.fire("linkDiv")},Ze=function(e,t,n,i,o,r){let s=i.firstChild,l=i.children[1].children;if(l.length===0)return;let a=s.offsetTop,d=s.offsetLeft,h=s.offsetWidth,f=s.offsetHeight;for(let p=0;p<l.length;p++){let u=l[p],c=u.firstChild,m=c.offsetTop,v=c.offsetLeft,g=c.offsetWidth,y=c.offsetHeight,b=c.firstChild.nodeObj.branchColor||n,N=e.generateSubBranch({pT:a,pL:d,pW:h,pH:f,cT:m,cL:v,cW:g,cH:y,direction:o,isFirst:r});t.appendChild(Xe(N,b,"2"));let C=c.children[1];if(C){if(!C.expanded)continue}else continue;Ze(e,t,b,u,o)}},je={addChild:"\u63D2\u5165\u5B50\u8282\u70B9",addParent:"\u63D2\u5165\u7236\u8282\u70B9",addSibling:"\u63D2\u5165\u540C\u7EA7\u8282\u70B9",removeNode:"\u5220\u9664\u8282\u70B9",focus:"\u4E13\u6CE8",cancelFocus:"\u53D6\u6D88\u4E13\u6CE8",moveUp:"\u4E0A\u79FB",moveDown:"\u4E0B\u79FB",link:"\u8FDE\u63A5",linkBidirectional:"\u53CC\u5411\u8FDE\u63A5",clickTips:"\u8BF7\u70B9\u51FB\u76EE\u6807\u8282\u70B9",summary:"\u6458\u8981"},$e={cn:je,zh_CN:je,zh_TW:{addChild:"\u63D2\u5165\u5B50\u7BC0\u9EDE",addParent:"\u63D2\u5165\u7236\u7BC0\u9EDE",addSibling:"\u63D2\u5165\u540C\u7D1A\u7BC0\u9EDE",removeNode:"\u522A\u9664\u7BC0\u9EDE",focus:"\u5C08\u6CE8",cancelFocus:"\u53D6\u6D88\u5C08\u6CE8",moveUp:"\u4E0A\u79FB",moveDown:"\u4E0B\u79FB",link:"\u9023\u63A5",linkBidirectional:"\u96D9\u5411\u9023\u63A5",clickTips:"\u8ACB\u9EDE\u64CA\u76EE\u6A19\u7BC0\u9EDE",summary:"\u6458\u8981"},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",linkBidirectional:"Bidirectional Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0434\u043E\u0447\u0435\u0440\u043D\u0438\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442",addParent:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0440\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442",addSibling:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u0430 \u044D\u0442\u043E\u043C \u0443\u0440\u043E\u0432\u043D\u0435",removeNode:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0437\u0435\u043B",focus:"\u0420\u0435\u0436\u0438\u043C \u0444\u043E\u043A\u0443\u0441\u0438\u0440\u043E\u0432\u043A\u0438",cancelFocus:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0440\u0435\u0436\u0438\u043C \u0444\u043E\u043A\u0443\u0441\u0438\u0440\u043E\u0432\u043A\u0438",moveUp:"\u041F\u043E\u0434\u043D\u044F\u0442\u044C \u0432\u044B\u0448\u0435",moveDown:"\u041E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u043D\u0438\u0436\u0435",link:"\u0421\u0441\u044B\u043B\u043A\u0430",linkBidirectional:"\u0414\u0432\u0443\u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043D\u0430\u044F \u0441\u0441\u044B\u043B\u043A\u0430",clickTips:"\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043D\u0430 \u0446\u0435\u043B\u0435\u0432\u043E\u0439 \u0443\u0437\u0435\u043B",summary:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},ja:{addChild:"\u5B50\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3059\u308B",addParent:"\u89AA\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3057\u307E\u3059",addSibling:"\u5144\u5F1F\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3059\u308B",removeNode:"\u30CE\u30FC\u30C9\u3092\u524A\u9664",focus:"\u96C6\u4E2D",cancelFocus:"\u96C6\u4E2D\u89E3\u9664",moveUp:"\u4E0A\u3078\u79FB\u52D5",moveDown:"\u4E0B\u3078\u79FB\u52D5",link:"\u30B3\u30CD\u30AF\u30C8",linkBidirectional:"\u53CC\u65B9\u5411\u30EA\u30F3\u30AF",clickTips:"\u30BF\u30FC\u30B2\u30C3\u30C8\u30CE\u30FC\u30C9\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304F\u3060\u3055\u3044",summary:"\u6982\u8981"},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",linkBidirectional:"Link bidirecional",clickTips:"Favor clicar no item alvo",summary:"Resumo"},it:{addChild:"Aggiungi figlio",addParent:"Aggiungi genitore",addSibling:"Aggiungi fratello",removeNode:"Rimuovi nodo",focus:"Modalit\xE0 Focus",cancelFocus:"Annulla Modalit\xE0 Focus",moveUp:"Sposta su",moveDown:"Sposta gi\xF9",link:"Collega",linkBidirectional:"Collegamento bidirezionale",clickTips:"Si prega di fare clic sul nodo di destinazione",summary:"Unisci nodi"},es:{addChild:"Agregar hijo",addParent:"Agregar padre",addSibling:"Agregar hermano",removeNode:"Eliminar nodo",focus:"Modo Enfoque",cancelFocus:"Cancelar Modo Enfoque",moveUp:"Mover hacia arriba",moveDown:"Mover hacia abajo",link:"Enlace",linkBidirectional:"Enlace bidireccional",clickTips:"Por favor haga clic en el nodo de destino",summary:"Resumen"},fr:{addChild:"Ajout enfant",addParent:"Ajout parent",addSibling:"Ajout voisin",removeNode:"Supprimer",focus:"Cibler",cancelFocus:"Retour",moveUp:"Monter",moveDown:"Descendre",link:"Lier",linkBidirectional:"Lien bidirectionnel",clickTips:"Cliquer sur le noeud cible",summary:"Annoter"},ko:{addChild:"\uC790\uC2DD \uCD94\uAC00",addParent:"\uBD80\uBAA8 \uCD94\uAC00",addSibling:"\uD615\uC81C \uCD94\uAC00",removeNode:"\uB178\uB4DC \uC0AD\uC81C",focus:"\uD3EC\uCEE4\uC2A4 \uBAA8\uB4DC",cancelFocus:"\uD3EC\uCEE4\uC2A4 \uBAA8\uB4DC \uCDE8\uC18C",moveUp:"\uC704\uB85C \uC774\uB3D9",moveDown:"\uC544\uB798\uB85C \uC774\uB3D9",link:"\uC5F0\uACB0",linkBidirectional:"\uC591\uBC29\uD5A5 \uC5F0\uACB0",clickTips:"\uB300\uC0C1 \uB178\uB4DC\uB97C \uD074\uB9AD\uD558\uC2ED\uC2DC\uC624",summary:"\uC694\uC57D"}};function Bt(e,t){t=t===!0?{focus:!0,link:!0}:t;let n=w=>{let x=document.createElement("div");return x.innerText=w,x.className="tips",x},i=(w,x,S)=>{let k=document.createElement("li");return k.id=w,k.innerHTML=`<span>${ne(x)}</span><span ${S?'class="key"':""}>${ne(S)}</span>`,k},o=$e[e.locale]?e.locale:"en",r=$e[o],s=i("cm-add_child",r.addChild,"Tab"),l=i("cm-add_parent",r.addParent,"Ctrl + Enter"),a=i("cm-add_sibling",r.addSibling,"Enter"),d=i("cm-remove_child",r.removeNode,"Delete"),h=i("cm-fucus",r.focus,""),f=i("cm-unfucus",r.cancelFocus,""),p=i("cm-up",r.moveUp,"PgUp"),u=i("cm-down",r.moveDown,"Pgdn"),c=i("cm-link",r.link,""),m=i("cm-link-bidirectional",r.linkBidirectional,""),v=i("cm-summary",r.summary,""),g=document.createElement("ul");if(g.className="menu-list",g.appendChild(s),g.appendChild(l),g.appendChild(a),g.appendChild(d),t.focus&&(g.appendChild(h),g.appendChild(f)),g.appendChild(p),g.appendChild(u),g.appendChild(v),t.link&&(g.appendChild(c),g.appendChild(m)),t&&t.extend)for(let w=0;w<t.extend.length;w++){let x=t.extend[w],S=i(x.name,x.name,x.key||"");g.appendChild(S),S.onclick=k=>{x.onclick(k)}}let y=document.createElement("div");y.className="context-menu",y.appendChild(g),y.hidden=!0,e.container.append(y);let b=!0,N=w=>{let x=w.target;if(pe(x)){x.parentElement.tagName==="ME-ROOT"?b=!0:b=!1,b?(h.className="disabled",p.className="disabled",u.className="disabled",l.className="disabled",a.className="disabled",d.className="disabled"):(h.className="",p.className="",u.className="",l.className="",a.className="",d.className=""),y.hidden=!1,g.style.top="",g.style.bottom="",g.style.left="",g.style.right="";let S=g.getBoundingClientRect(),k=g.offsetHeight,j=g.offsetWidth,B=w.clientY-S.top,z=w.clientX-S.left;k+B>window.innerHeight?(g.style.top="",g.style.bottom="0px"):(g.style.bottom="",g.style.top=B+15+"px"),j+z>window.innerWidth?(g.style.left="",g.style.right="0px"):(g.style.right="",g.style.left=z+10+"px")}};e.bus.addListener("showContextMenu",N),y.onclick=w=>{w.target===y&&(y.hidden=!0)},s.onclick=()=>{e.addChild(),y.hidden=!0},l.onclick=()=>{e.insertParent(),y.hidden=!0},a.onclick=()=>{b||(e.insertSibling("after"),y.hidden=!0)},d.onclick=()=>{b||(e.removeNodes(e.currentNodes||[]),y.hidden=!0)},h.onclick=()=>{b||(e.focusNode(e.currentNode),y.hidden=!0)},f.onclick=()=>{e.cancelFocus(),y.hidden=!0},p.onclick=()=>{b||(e.moveUpNode(),y.hidden=!0)},u.onclick=()=>{b||(e.moveDownNode(),y.hidden=!0)};let C=w=>{y.hidden=!0;let x=e.currentNode,S=n(r.clickTips);e.container.appendChild(S),e.map.addEventListener("click",k=>{k.preventDefault(),S.remove();let j=k.target;(j.parentElement.tagName==="ME-PARENT"||j.parentElement.tagName==="ME-ROOT")&&e.createArrow(x,j,w)},{once:!0})};return c.onclick=()=>C(),m.onclick=()=>C({bidirectional:!0}),v.onclick=()=>{y.hidden=!0,e.createSummary(),e.unselectNodes(e.currentNodes)},()=>{s.onclick=null,l.onclick=null,a.onclick=null,d.onclick=null,h.onclick=null,f.onclick=null,p.onclick=null,u.onclick=null,c.onclick=null,v.onclick=null,y.onclick=null,e.container.oncontextmenu=null}}var fe=document,Wt=function(e,t){if(!t)return me(e),e;let n=e.querySelector(".insert-preview"),i=`insert-preview ${t} show`;return n||(n=fe.createElement("div"),e.appendChild(n)),n.className=i,e},me=function(e){if(!e)return;let t=e.querySelectorAll(".insert-preview");for(let n of t||[])n.remove()},Oe=function(e,t){for(let n of t){let i=n.parentElement.parentElement.contains(e);if(!(e&&e.tagName==="ME-TPC"&&e!==n&&!i&&e.nodeObj.parent))return!1}return!0},Ft=function(e){let t=document.createElement("div");return t.className="mind-elixir-ghost",e.container.appendChild(t),t},ge=class{constructor(t){J(this,"mind"),J(this,"isMoving",!1),J(this,"interval",null),J(this,"speed",20),this.mind=t}move(t,n){this.isMoving||(this.isMoving=!0,this.interval=setInterval(()=>{this.mind.move(t*this.speed*this.mind.scaleVal,n*this.speed*this.mind.scaleVal)},100))}stop(){this.isMoving=!1,clearInterval(this.interval)}};function Rt(e){let t=null,n=null,i=Ft(e),o=new ge(e),r=a=>{e.selection.cancel();let d=a.target;if(d?.tagName!=="ME-TPC"){a.preventDefault();return}let h=e.currentNodes;h!=null&&h.includes(d)||(e.selectNode(d),h=e.currentNodes),e.dragged=h,h.length>1?i.innerHTML=h.length+"":i.innerHTML=d.innerHTML;for(let f of h)f.parentElement.parentElement.style.opacity="0.5";a.dataTransfer.setDragImage(i,0,0),a.dataTransfer.dropEffect="move",e.dragMoveHelper.clear()},s=a=>{let{dragged:d}=e;if(!d)return;o.stop();for(let f of d)f.parentElement.parentElement.style.opacity="1";let h=a.target;h.style.opacity="",n&&(me(n),t==="before"?e.moveNodeBefore(d,n):t==="after"?e.moveNodeAfter(d,n):t==="in"&&e.moveNodeIn(d,n),e.dragged=null,i.innerHTML="")},l=a=>{a.preventDefault();let d=12*e.scaleVal,{dragged:h}=e;if(!h)return;let f=e.container.getBoundingClientRect();a.clientX<f.x+50?o.move(1,0):a.clientX>f.x+f.width-50?o.move(-1,0):a.clientY<f.y+50?o.move(0,1):a.clientY>f.y+f.height-50?o.move(0,-1):o.stop(),me(n);let p=fe.elementFromPoint(a.clientX,a.clientY-d);if(Oe(p,h)){n=p;let u=p.getBoundingClientRect(),c=u.y;a.clientY>c+u.height?t="after":t="in"}else{let u=fe.elementFromPoint(a.clientX,a.clientY+d),c=u.getBoundingClientRect();if(Oe(u,h)){n=u;let m=c.y;a.clientY<m?t="before":t="in"}else t=n=null}n&&Wt(n,t)};return Ee([{dom:e.map,evt:"dragstart",func:r},{dom:e.map,evt:"dragend",func:s},{dom:e.map,evt:"dragover",func:l}])}var It=function(e){return["createSummary","removeSummary","finishEditSummary"].includes(e.name)?{type:"summary",value:e.obj.id}:["createArrow","removeArrow","finishEditArrowLabel"].includes(e.name)?{type:"arrow",value:e.obj.id}:["removeNodes","copyNodes","moveNodeBefore","moveNodeAfter","moveNodeIn"].includes(e.name)?{type:"nodes",value:e.objs.map(t=>t.id)}:{type:"nodes",value:[e.obj.id]}};function Vt(e){let t=[],n=-1,i=e.getData(),o=[];e.undo=function(){if(n>-1){let a=t[n];i=a.prev,e.refresh(a.prev);try{a.currentTarget.type==="nodes"&&(a.operation==="removeNodes"?e.selectNodes(a.currentTarget.value.map(d=>this.findEle(d))):e.selectNodes(a.currentSelected.map(d=>this.findEle(d))))}catch{}finally{n--}}},e.redo=function(){if(n<t.length-1){n++;let a=t[n];i=a.next,e.refresh(a.next);try{a.currentTarget.type==="nodes"&&(a.operation==="removeNodes"?e.selectNodes(a.currentSelected.map(d=>this.findEle(d))):e.selectNodes(a.currentTarget.value.map(d=>this.findEle(d))))}catch{}}};let r=function(a){if(a.name==="beginEdit")return;t=t.slice(0,n+1);let d=e.getData(),h={prev:i,operation:a.name,currentSelected:o.map(f=>f.id),currentTarget:It(a),next:d};t.push(h),i=d,n=t.length-1},s=function(a){(a.metaKey||a.ctrlKey)&&(a.shiftKey&&a.key==="Z"||a.key==="y")?e.redo():(a.metaKey||a.ctrlKey)&&a.key==="z"&&e.undo()},l=function(a){o=e.currentNodes.map(d=>d.nodeObj)};return e.bus.addListener("operation",r),e.bus.addListener("selectNodes",l),e.container.addEventListener("keydown",s),()=>{e.bus.removeListener("operation",r),e.bus.removeListener("selectNodes",l),e.container.removeEventListener("keydown",s)}}var Kt='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1750169394918" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2021" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z" p-id="2022"></path></svg>',Yt='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1750169375313" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1775" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="currentColor" p-id="1776"></path></svg>',qt='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1750169667709" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3037" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="currentColor" p-id="3038"></path></svg>',zt='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1750169402629" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2170" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z" p-id="2171"></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z" p-id="2172"></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z" p-id="2173"></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z" p-id="2174"></path></svg>',Ut='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1750169573443" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2883" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="currentColor" p-id="2884"></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="currentColor" p-id="2885"></path></svg>',Gt='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1750169419447" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2480" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z" p-id="2481"></path></svg>',Xt='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1750169426515" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2730" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z" p-id="2731"></path></svg>',Jt={side:Kt,left:Yt,right:qt,full:zt,living:Ut,zoomin:Gt,zoomout:Xt},F=(e,t)=>{let n=document.createElement("span");return n.id=e,n.innerHTML=Jt[t],n};function Zt(e){let t=document.createElement("div"),n=F("fullscreen","full"),i=F("toCenter","living"),o=F("zoomout","zoomout"),r=F("zoomin","zoomin"),s=document.createElement("span");return s.innerText="100%",t.appendChild(n),t.appendChild(i),t.appendChild(o),t.appendChild(r),t.className="mind-elixir-toolbar rb",n.onclick=()=>{document.fullscreenElement===e.el?document.exitFullscreen():e.el.requestFullscreen()},i.onclick=()=>{e.toCenter()},o.onclick=()=>{e.scale(e.scaleVal-e.scaleSensitivity)},r.onclick=()=>{e.scale(e.scaleVal+e.scaleSensitivity)},t}function Qt(e){let t=document.createElement("div"),n=F("tbltl","left"),i=F("tbltr","right"),o=F("tblts","side");return t.appendChild(n),t.appendChild(i),t.appendChild(o),t.className="mind-elixir-toolbar lt",n.onclick=()=>{e.initLeft()},i.onclick=()=>{e.initRight()},o.onclick=()=>{e.initSide()},t}function en(e){e.container.append(Zt(e)),e.container.append(Qt(e))}var ve=class{constructor(){this._listeners=new Map,this.on=this.addEventListener,this.off=this.removeEventListener,this.emit=this.dispatchEvent}addEventListener(t,n){let i=this._listeners.get(t)??new Set;return this._listeners.set(t,i),i.add(n),this}removeEventListener(t,n){var i;return(i=this._listeners.get(t))==null||i.delete(n),this}dispatchEvent(t,...n){let i=!0;for(let o of this._listeners.get(t)??[])i=o(...n)!==!1&&i;return i}unbindAllListeners(){this._listeners.clear()}},Pe=(e,t="px")=>typeof e=="number"?e+t:e,$=({style:e},t,n)=>{if(typeof t=="object")for(let[i,o]of Object.entries(t))o!==void 0&&(e[i]=Pe(o));else n!==void 0&&(e[t]=Pe(n))},He=(e=0,t=0,n=0,i=0)=>{let o={x:e,y:t,width:n,height:i,top:t,left:e,right:e+n,bottom:t+i};return{...o,toJSON:()=>JSON.stringify(o)}},tn=e=>{let t,n=-1,i=!1;return{next:(...o)=>{t=o,i||(i=!0,n=requestAnimationFrame(()=>{e(...t),i=!1}))},cancel:()=>{cancelAnimationFrame(n),i=!1}}},Be=(e,t,n="touch")=>{switch(n){case"center":{let i=t.left+t.width/2,o=t.top+t.height/2;return i>=e.left&&i<=e.right&&o>=e.top&&o<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}},nn=()=>matchMedia("(hover: none), (pointer: coarse)").matches,on=()=>"safari"in window,ye=e=>Array.isArray(e)?e:[e],Qe=e=>(t,n,i,o={})=>{(t instanceof HTMLCollection||t instanceof NodeList)&&(t=Array.from(t)),n=ye(n),t=ye(t);for(let r of t)if(r)for(let s of n)r[e](s,i,{capture:!1,...o})},O=Qe("addEventListener"),L=Qe("removeEventListener"),Z=e=>{var t;let{clientX:n,clientY:i,target:o}=((t=e.touches)==null?void 0:t[0])??e;return{x:n,y:i,target:o}},V=(e,t=document)=>ye(e).map(n=>typeof n=="string"?Array.from(t.querySelectorAll(n)):n instanceof Element?n:null).flat().filter(Boolean),rn=(e,t)=>t.some(n=>typeof n=="number"?e.button===n:typeof n=="object"?n.button!==e.button?!1:n.modifiers.every(i=>{switch(i){case"alt":return e.altKey;case"ctrl":return e.ctrlKey||e.metaKey;case"shift":return e.shiftKey}}):!1),{abs:W,max:We,min:Fe,ceil:Re}=Math,Ie=(e=[])=>({stored:e,selected:[],touched:[],changed:{added:[],removed:[]}}),et=class extends ve{constructor(e){var t,n,i,o,r;super(),this._selection=Ie(),this._targetBoundaryScrolled=!0,this._selectables=[],this._areaLocation={y1:0,x2:0,y2:0,x1:0},this._areaRect=He(),this._singleClick=!0,this._scrollAvailable=!0,this._scrollingActive=!1,this._scrollSpeed={x:0,y:0},this._scrollDelta={x:0,y:0},this._lastMousePosition={x:0,y:0},this.enable=this._toggleStartEvents,this.disable=this._toggleStartEvents.bind(this,!1),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...e,behaviour:{overlap:"invert",intersect:"touch",triggers:[0],...e.behaviour,startThreshold:(t=e.behaviour)!=null&&t.startThreshold?typeof e.behaviour.startThreshold=="number"?e.behaviour.startThreshold:{x:10,y:10,...e.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(n=e.behaviour)==null?void 0:n.scrolling,startScrollMargins:{x:0,y:0,...(o=(i=e.behaviour)==null?void 0:i.scrolling)==null?void 0:o.startScrollMargins}}},features:{range:!0,touch:!0,deselectOnBlur:!1,...e.features,singleTap:{allow:!0,intersect:"native",...(r=e.features)==null?void 0:r.singleTap}}};for(let d of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[d]=="function"&&(this[d]=this[d].bind(this));let{document:s,selectionAreaClass:l,selectionContainerClass:a}=this._options;this._area=s.createElement("div"),this._clippingElement=s.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(l),a&&this._clippingElement.classList.add(a),$(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),$(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=tn(d=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",d),this._redrawSelectionArea()}),this.enable()}_toggleStartEvents(e=!0){let{document:t,features:n}=this._options,i=e?O:L;i(t,"mousedown",this._onTapStart),n.touch&&i(t,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(e,t=!1){let{x:n,y:i,target:o}=Z(e),{document:r,startAreas:s,boundaries:l,features:a,behaviour:d}=this._options,h=o.getBoundingClientRect();if(e instanceof MouseEvent&&!rn(e,d.triggers))return;let f=V(s,r),p=V(l,r);this._targetElement=p.find(v=>Be(v.getBoundingClientRect(),h));let u=e.composedPath(),c=f.find(v=>u.includes(v));if(this._targetBoundary=p.find(v=>u.includes(v)),!this._targetElement||!c||!this._targetBoundary||!t&&this._emitEvent("beforestart",e)===!1)return;this._areaLocation={x1:n,y1:i,x2:0,y2:0};let m=r.scrollingElement??r.body;this._scrollDelta={x:m.scrollLeft,y:m.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),O(r,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),O(r,["mouseup","touchcancel","touchend"],this._onTapStop),O(r,"scroll",this._onScroll),a.deselectOnBlur&&(this._targetBoundaryScrolled=!1,O(this._targetBoundary,"scroll",this._onStartAreaScroll))}_onSingleTap(e){let{singleTap:{intersect:t},range:n}=this._options.features,i=Z(e),o;if(t==="native")o=i.target;else if(t==="touch"){this.resolveSelectables();let{x:s,y:l}=i;o=this._selectables.find(a=>{let{right:d,left:h,top:f,bottom:p}=a.getBoundingClientRect();return s<d&&s>h&&l<p&&l>f})}if(!o)return;for(this.resolveSelectables();!this._selectables.includes(o);)if(o.parentElement)o=o.parentElement;else{this._targetBoundaryScrolled||this.clearSelection();return}let{stored:r}=this._selection;if(this._emitEvent("start",e),e.shiftKey&&n&&this._latestElement){let s=this._latestElement,[l,a]=s.compareDocumentPosition(o)&4?[o,s]:[s,o],d=[...this._selectables.filter(h=>h.compareDocumentPosition(l)&4&&h.compareDocumentPosition(a)&2),l,a];this.select(d),this._latestElement=s}else r.includes(o)&&(r.length===1||e.ctrlKey||r.every(s=>this._selection.stored.includes(s)))?this.deselect(o):(this.select(o),this._latestElement=o)}_delayedTapMove(e){let{container:t,document:n,behaviour:{startThreshold:i}}=this._options,{x1:o,y1:r}=this._areaLocation,{x:s,y:l}=Z(e);if(typeof i=="number"&&W(s+l-(o+r))>=i||typeof i=="object"&&W(s-o)>=i.x||W(l-r)>=i.y){if(L(n,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",e)===!1){L(n,["mouseup","touchcancel","touchend"],this._onTapStop);return}O(n,["mousemove","touchmove"],this._onTapMove,{passive:!1}),$(this._area,"display","block"),V(t,n)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(O(this._targetElement,"wheel",this._wheelScroll,{passive:!1}),O(this._options.document,"keydown",this._keyboardScroll,{passive:!1}),this._selectables=this._selectables.filter(a=>this._targetElement.contains(a))),this._setupSelectionArea(),this._emitEvent("start",e),this._onTapMove(e)}this._handleMoveEvent(e)}_setupSelectionArea(){let{_clippingElement:e,_targetElement:t,_area:n}=this,i=this._targetRect=t.getBoundingClientRect();this._scrollAvailable?($(e,{top:i.top,left:i.left,width:i.width,height:i.height}),$(n,{marginTop:-i.top,marginLeft:-i.left})):($(e,{top:0,left:0,width:"100%",height:"100%"}),$(n,{marginTop:0,marginLeft:0}))}_onTapMove(e){let{_scrollSpeed:t,_areaLocation:n,_options:i,_frame:o}=this,{speedDivider:r}=i.behaviour.scrolling,s=this._targetElement,{x:l,y:a}=Z(e);if(n.x2=l,n.y2=a,this._lastMousePosition.x=l,this._lastMousePosition.y=a,this._scrollAvailable&&!this._scrollingActive&&(t.y||t.x)){this._scrollingActive=!0;let d=()=>{if(!t.x&&!t.y){this._scrollingActive=!1;return}let{scrollTop:h,scrollLeft:f}=s;t.y&&(s.scrollTop+=Re(t.y/r),n.y1-=s.scrollTop-h),t.x&&(s.scrollLeft+=Re(t.x/r),n.x1-=s.scrollLeft-f),o.next(e),requestAnimationFrame(d)};requestAnimationFrame(d)}else o.next(e);this._handleMoveEvent(e)}_handleMoveEvent(e){let{features:t}=this._options;(t.touch&&nn()||this._scrollAvailable&&on())&&e.preventDefault()}_onScroll(){let{_scrollDelta:e,_options:{document:t}}=this,{scrollTop:n,scrollLeft:i}=t.scrollingElement??t.body;this._areaLocation.x1+=e.x-i,this._areaLocation.y1+=e.y-n,e.x=i,e.y=n,this._setupSelectionArea(),this._frame.next(null)}_onStartAreaScroll(){this._targetBoundaryScrolled=!0,L(this._targetElement,"scroll",this._onStartAreaScroll)}_wheelScroll(e){let{manualSpeed:t}=this._options.behaviour.scrolling,n=e.deltaY?e.deltaY>0?1:-1:0,i=e.deltaX?e.deltaX>0?1:-1:0;this._scrollSpeed.y+=n*t,this._scrollSpeed.x+=i*t,this._onTapMove(e),e.preventDefault()}_keyboardScroll(e){let{manualSpeed:t}=this._options.behaviour.scrolling,n=e.key==="ArrowLeft"?-1:e.key==="ArrowRight"?1:0,i=e.key==="ArrowUp"?-1:e.key==="ArrowDown"?1:0;this._scrollSpeed.x+=Math.sign(n)*t,this._scrollSpeed.y+=Math.sign(i)*t,e.preventDefault(),this._onTapMove({clientX:this._lastMousePosition.x,clientY:this._lastMousePosition.y,preventDefault:()=>{}})}_recalculateSelectionAreaRect(){let{_scrollSpeed:e,_areaLocation:t,_targetElement:n,_options:i}=this,{scrollTop:o,scrollHeight:r,clientHeight:s,scrollLeft:l,scrollWidth:a,clientWidth:d}=n,h=this._targetRect,{x1:f,y1:p}=t,{x2:u,y2:c}=t,{behaviour:{scrolling:{startScrollMargins:m}}}=i;u<h.left+m.x?(e.x=l?-W(h.left-u+m.x):0,u=u<h.left?h.left:u):u>h.right-m.x?(e.x=a-l-d?W(h.left+h.width-u-m.x):0,u=u>h.right?h.right:u):e.x=0,c<h.top+m.y?(e.y=o?-W(h.top-c+m.y):0,c=c<h.top?h.top:c):c>h.bottom-m.y?(e.y=r-o-s?W(h.top+h.height-c-m.y):0,c=c>h.bottom?h.bottom:c):e.y=0;let v=Fe(f,u),g=Fe(p,c),y=We(f,u),b=We(p,c);this._areaRect=He(v,g,y-v,b-g)}_redrawSelectionArea(){let{x:e,y:t,width:n,height:i}=this._areaRect,{style:o}=this._area;o.left=`${e}px`,o.top=`${t}px`,o.width=`${n}px`,o.height=`${i}px`}_onTapStop(e,t){var n;let{document:i,features:o}=this._options,{_singleClick:r}=this;L(this._targetElement,"scroll",this._onStartAreaScroll),L(i,["mousemove","touchmove"],this._delayedTapMove),L(i,["touchmove","mousemove"],this._onTapMove),L(i,["mouseup","touchcancel","touchend"],this._onTapStop),L(i,"scroll",this._onScroll),this._keepSelection(),e&&r&&o.singleTap.allow?this._onSingleTap(e):!r&&!t&&(this._updateElementSelection(),this._emitEvent("stop",e)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,L(this._targetElement,"wheel",this._wheelScroll,{passive:!0}),L(this._options.document,"keydown",this._keyboardScroll,{passive:!0}),this._clippingElement.remove(),(n=this._frame)==null||n.cancel(),$(this._area,"display","none")}_updateElementSelection(){let{_selectables:e,_options:t,_selection:n,_areaRect:i}=this,{stored:o,selected:r,touched:s}=n,{intersect:l,overlap:a}=t.behaviour,d=a==="invert",h=[],f=[],p=[];for(let c=0;c<e.length;c++){let m=e[c];if(Be(i,m.getBoundingClientRect(),l)){if(r.includes(m))o.includes(m)&&!s.includes(m)&&s.push(m);else if(d&&o.includes(m)){p.push(m);continue}else f.push(m);h.push(m)}}d&&f.push(...o.filter(c=>!r.includes(c)));let u=a==="keep";for(let c=0;c<r.length;c++){let m=r[c];!h.includes(m)&&!(u&&o.includes(m))&&p.push(m)}n.selected=h,n.changed={added:f,removed:p},this._latestElement=void 0}_emitEvent(e,t){return this.emit(e,{event:t,store:this._selection,selection:this})}_keepSelection(){let{_options:e,_selection:t}=this,{selected:n,changed:i,touched:o,stored:r}=t,s=n.filter(l=>!r.includes(l));switch(e.behaviour.overlap){case"drop":{t.stored=[...s,...r.filter(l=>!o.includes(l))];break}case"invert":{t.stored=[...s,...r.filter(l=>!i.removed.includes(l))];break}case"keep":{t.stored=[...r,...n.filter(l=>!r.includes(l))];break}}}trigger(e,t=!0){this._onTapStart(e,t)}resolveSelectables(){this._selectables=V(this._options.selectables,this._options.document)}clearSelection(e=!0,t=!1){let{selected:n,stored:i,changed:o}=this._selection;o.added=[],o.removed.push(...n,...e?i:[]),t||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection=Ie(e?[]:i)}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}getSelectables(){return this._selectables}setAreaLocation(e){Object.assign(this._areaLocation,e),this._redrawSelectionArea()}getAreaLocation(){return this._areaLocation}cancel(e=!1){this._onTapStop(null,!e)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(e,t=!1){let{changed:n,selected:i,stored:o}=this._selection,r=V(e,this._options.document).filter(s=>!i.includes(s)&&!o.includes(s));return o.push(...r),i.push(...r),n.added.push(...r),n.removed=[],this._latestElement=void 0,t||(this._emitEvent("move",null),this._emitEvent("stop",null)),r}deselect(e,t=!1){let{selected:n,stored:i,changed:o}=this._selection,r=V(e,this._options.document).filter(s=>n.includes(s)||i.includes(s));this._selection.stored=i.filter(s=>!r.includes(s)),this._selection.selected=n.filter(s=>!r.includes(s)),this._selection.changed.added=[],this._selection.changed.removed.push(...r.filter(s=>!o.removed.includes(s))),this._latestElement=void 0,t||(this._emitEvent("move",null),this._emitEvent("stop",null))}};et.version="3.9.0";var sn=et;function ln(e){let t=e.mouseSelectionButton===2?[2]:[0],n=new sn({selectables:[".map-container me-tpc"],boundaries:[e.container],container:e.selectionContainer,features:{touch:!1},behaviour:{triggers:t,scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",({event:i})=>{var o;let r=i.target;if(r.id==="input-box"||r.className==="circle"||(o=e.container.querySelector(".context-menu"))!=null&&o.contains(r))return!1;if(!i.ctrlKey&&!i.metaKey){if(r.tagName==="ME-TPC"&&r.classList.contains("selected"))return!1;e.clearSelection()}let s=n.getSelectionArea();return s.style.background="#4f90f22d",s.style.border="1px solid #4f90f2",s.parentElement&&(s.parentElement.style.zIndex="9999"),!0}).on("move",({store:{changed:{added:i,removed:o}}})=>{if(i.length>0||o.length>0,i.length>0){for(let r of i)r.className="selected";e.currentNodes=[...e.currentNodes,...i],e.bus.fire("selectNodes",i.map(r=>r.nodeObj))}if(o.length>0){for(let r of o)r.classList.remove("selected");e.currentNodes=e.currentNodes.filter(r=>!(o!=null&&o.includes(r))),e.bus.fire("unselectNodes",o.map(r=>r.nodeObj))}});e.selection=n}var an=function(e,t=!0){this.theme=e;let n={...(e.type==="dark"?we:be).cssVar,...e.cssVar},i=Object.keys(n);for(let o=0;o<i.length;o++){let r=i[o];this.container.style.setProperty(r,n[r])}t&&this.refresh()},q=e=>{var t;let n=(t=e.parent)==null?void 0:t.children,i=n?.indexOf(e)??0;return{siblings:n,index:i}};function cn(e){let{siblings:t,index:n}=q(e);if(t===void 0)return;let i=t[n];n===0?(t[n]=t[t.length-1],t[t.length-1]=i):(t[n]=t[n-1],t[n-1]=i)}function dn(e){let{siblings:t,index:n}=q(e);if(t===void 0)return;let i=t[n];n===t.length-1?(t[n]=t[0],t[0]=i):(t[n]=t[n+1],t[n+1]=i)}function tt(e){let{siblings:t,index:n}=q(e);return t===void 0?0:(t.splice(n,1),t.length)}function hn(e,t,n){let{siblings:i,index:o}=q(n);i!==void 0&&(t==="before"?i.splice(o,0,e):i.splice(o+1,0,e))}function pn(e,t){let{siblings:n,index:i}=q(e);n!==void 0&&(n[i]=t,t.children=[e])}function nt(e,t,n){var i;if(tt(t),(i=n.parent)!=null&&i.parent||(t.direction=n.direction),e==="in")n.children?n.children.push(t):n.children=[t];else{t.direction!==void 0&&(t.direction=n.direction);let{siblings:o,index:r}=q(n);if(o===void 0)return;e==="before"?o.splice(r,0,t):o.splice(r+1,0,t)}}var un=function({map:e,direction:t},n){var i,o;if(t===0)return 0;if(t===1)return 1;if(t===2){let r=((i=e.querySelector(".lhs"))==null?void 0:i.childElementCount)||0,s=((o=e.querySelector(".rhs"))==null?void 0:o.childElementCount)||0;return r<=s?(n.direction=0,0):(n.direction=1,1)}},it=function(e,t,n){var i,o;let r=n.children[0].children[0],s=t.parentElement;if(s.tagName==="ME-PARENT"){if(X(r),s.children[1])s.nextSibling.appendChild(n);else{let l=e.createChildren([n]);s.appendChild(Ne(!0)),s.insertAdjacentElement("afterend",l)}e.linkDiv(n.offsetParent)}else s.tagName==="ME-ROOT"&&(un(e,r.nodeObj)===0?(i=e.container.querySelector(".lhs"))==null||i.appendChild(n):(o=e.container.querySelector(".rhs"))==null||o.appendChild(n),e.linkDiv())},fn=function(e,t){let n=e.parentNode;if(t===0){let i=n.parentNode.parentNode;i.tagName!=="ME-MAIN"&&(i.previousSibling.children[1].remove(),i.remove())}n.parentNode.remove()},ot={before:"beforebegin",after:"afterend"},X=function(e){let t=e.parentElement.parentElement.lastElementChild;t?.tagName==="svg"&&t?.remove()},mn=function(e,t){let n=e.nodeObj,i=Se(n);i.style&&t.style&&(t.style=Object.assign(i.style,t.style));let o=Object.assign(n,t);Ce(e,o),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:o,origin:i})},ke=function(e,t,n){if(!t)return null;let i=t.nodeObj;i.expanded===!1&&(e.expandNode(t,!0),t=e.findEle(i.id));let o=n||e.generateNewObj();i.children?i.children.push(o):i.children=[o],P(e.nodeData);let{grp:r,top:s}=e.createWrapper(o);return it(e,t,r),{newTop:s,newNodeObj:o}},gn=function(e,t,n){var i,o,r,s;let l=t||this.currentNode;if(!l)return;let a=l.nodeObj;if(a.parent){if(!((i=a.parent)!=null&&i.parent)&&((r=(o=a.parent)==null?void 0:o.children)==null?void 0:r.length)===1&&this.direction===2){this.addChild(this.findEle(a.parent.id),n);return}}else{this.addChild();return}let d=n||this.generateNewObj();if(!((s=a.parent)!=null&&s.parent)){let u=l.closest("me-main").className===M.LHS?0:1;d.direction=u}hn(d,e,a),P(this.nodeData);let h=l.parentElement,{grp:f,top:p}=this.createWrapper(d);h.parentElement.insertAdjacentElement(ot[e],f),this.linkDiv(f.offsetParent),n||this.editTopic(p.firstChild),this.bus.fire("operation",{name:"insertSibling",type:e,obj:d}),this.selectNode(p.firstChild,!0)},vn=function(e,t){let n=e||this.currentNode;if(!n)return;X(n);let i=n.nodeObj;if(!i.parent)return;let o=t||this.generateNewObj();pn(i,o),P(this.nodeData);let r=n.parentElement.parentElement,{grp:s,top:l}=this.createWrapper(o,!0);l.appendChild(Ne(!0)),r.insertAdjacentElement("afterend",s);let a=this.createChildren([r]);l.insertAdjacentElement("afterend",a),this.linkDiv(),t||this.editTopic(l.firstChild),this.selectNode(l.firstChild,!0),this.bus.fire("operation",{name:"insertParent",obj:o})},yn=function(e,t){let n=e||this.currentNode;if(!n)return;let i=ke(this,n,t);if(!i)return;let{newTop:o,newNodeObj:r}=i;this.bus.fire("operation",{name:"addChild",obj:r}),t||this.editTopic(o.firstChild),this.selectNode(o.firstChild,!0)},bn=function(e,t){let n=Se(e.nodeObj);xe(n);let i=ke(this,t,n);if(!i)return;let{newNodeObj:o}=i;this.selectNode(this.findEle(o.id)),this.bus.fire("operation",{name:"copyNode",obj:o})},wn=function(e,t){e=ae(e);let n=[];for(let i=0;i<e.length;i++){let o=e[i],r=Se(o.nodeObj);xe(r);let s=ke(this,t,r);if(!s)return;let{newNodeObj:l}=s;n.push(l)}this.unselectNodes(this.currentNodes),this.selectNodes(n.map(i=>this.findEle(i.id))),this.bus.fire("operation",{name:"copyNodes",objs:n})},xn=function(e){let t=e||this.currentNode;if(!t)return;let n=t.nodeObj;cn(n);let i=t.parentNode.parentNode;i.parentNode.insertBefore(i,i.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:n})},Sn=function(e){let t=e||this.currentNode;if(!t)return;let n=t.nodeObj;dn(n);let i=t.parentNode.parentNode;i.nextSibling?i.nextSibling.insertAdjacentElement("afterend",i):i.parentNode.prepend(i),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:n})},En=function(e){if(e.length===0)return;e=ae(e);for(let n of e){let i=n.nodeObj,o=tt(i);fn(n,o)}let t=e[e.length-1];this.selectNode(this.findEle(t.nodeObj.parent.id)),this.linkDiv(),this.bus.fire("operation",{name:"removeNodes",objs:e.map(n=>n.nodeObj)})},Cn=function(e,t){e=ae(e);let n=t.nodeObj;n.expanded===!1&&(this.expandNode(t,!0),t=this.findEle(n.id));for(let i of e){let o=i.nodeObj;nt("in",o,n),P(this.nodeData);let r=i.parentElement;it(this,t,r.parentElement)}this.linkDiv(),this.bus.fire("operation",{name:"moveNodeIn",objs:e.map(i=>i.nodeObj),toObj:n})},rt=(e,t,n,i)=>{e=ae(e),t==="after"&&(e=e.reverse());let o=n.nodeObj,r=[];for(let s of e){let l=s.nodeObj;nt(t,l,o),P(i.nodeData),X(s);let a=s.parentElement.parentNode;r.includes(a.parentElement)||r.push(a.parentElement),n.parentElement.parentNode.insertAdjacentElement(ot[t],a)}for(let s of r)s.childElementCount===0&&s.tagName!=="ME-MAIN"&&(s.previousSibling.children[1].remove(),s.remove());i.linkDiv(),i.bus.fire("operation",{name:t==="before"?"moveNodeBefore":"moveNodeAfter",objs:e.map(s=>s.nodeObj),toObj:o})},Nn=function(e,t){rt(e,"before",t,this)},kn=function(e,t){rt(e,"after",t,this)},_n=function(e){let t=e||this.currentNode;t&&(t.nodeObj.dangerouslySetInnerHTML||this.editTopic(t))},Tn=function(e,t){e.text.textContent=t,e.nodeObj.topic=t,this.linkDiv()},st=Object.freeze(Object.defineProperty({__proto__:null,addChild:yn,beginEdit:_n,copyNode:bn,copyNodes:wn,insertParent:vn,insertSibling:gn,moveDownNode:Sn,moveNodeAfter:kn,moveNodeBefore:Nn,moveNodeIn:Cn,moveUpNode:xn,removeNodes:En,reshapeNode:mn,rmSubline:X,setNodeTopic:Tn},Symbol.toStringTag,{value:"Module"}));function An(e){return{nodeData:e.isFocusMode?e.nodeDataBackup:e.nodeData,arrows:e.arrows,summaries:e.summaries,direction:e.direction,theme:e.theme}}var Ln=function(e){let t=this.container,n=e.getBoundingClientRect(),i=t.getBoundingClientRect();if(n.top>i.bottom||n.bottom<i.top||n.left>i.right||n.right<i.left){let o=n.left+n.width/2,r=n.top+n.height/2,s=i.left+i.width/2,l=i.top+i.height/2,a=o-s,d=r-l;this.move(-a,-d)}},Mn=function(e,t,n){this.clearSelection(),this.scrollIntoView(e),this.selection.select(e),t&&this.bus.fire("selectNewNode",e.nodeObj)},Dn=function(e){this.selection.select(e)},jn=function(e){this.selection.deselect(e)},$n=function(){this.unselectNodes(this.currentNodes),this.unselectSummary(),this.unselectArrow()},On=function(){let e=An(this);return JSON.stringify(e,(t,n)=>{if(!(t==="parent"&&typeof n!="string"))return n})},Pn=function(){return JSON.parse(this.getDataString())},Hn=function(){this.editable=!0},Bn=function(){this.editable=!1},Wn=function(e,t={x:0,y:0}){if(e<this.scaleMin||e>this.scaleMax)return;let n=this.container.getBoundingClientRect(),i=t.x?t.x-n.left-n.width/2:0,o=t.y?t.y-n.top-n.height/2:0,{dx:r,dy:s}=lt(this),l=this.map.style.transform,{x:a,y:d}=ze(l),h=a-r,f=d-s,p=this.scaleVal,u=(-i+h)*(1-e/p),c=(-o+f)*(1-e/p);this.map.style.transform=`translate(${a-u}px, ${d-c}px) scale(${e})`,this.scaleVal=e,this.bus.fire("scale",e)},Fn=function(){let e=this.nodes.offsetHeight/this.container.offsetHeight,t=this.nodes.offsetWidth/this.container.offsetWidth,n=1/Math.max(1,Math.max(e,t));this.scaleVal=n,this.map.style.transform="scale("+n+")",this.bus.fire("scale",n)},Rn=function(e,t){let{map:n,scaleVal:i,bus:o}=this,r=n.style.transform,{x:s,y:l}=ze(r);s+=e,l+=t,n.style.transform=`translate(${s}px, ${l}px) scale(${i})`,o.fire("move",{dx:e,dy:t})},lt=e=>{let{container:t,map:n,nodes:i}=e,o=n.querySelector("me-root"),r=o.offsetTop,s=o.offsetLeft,l=o.offsetWidth,a=o.offsetHeight,d,h;return e.alignment==="root"?(d=t.offsetWidth/2-s-l/2,h=t.offsetHeight/2-r-a/2,n.style.transformOrigin=`${s+l/2}px 50%`):(d=(t.offsetWidth-i.offsetWidth)/2,h=(t.offsetHeight-i.offsetHeight)/2,n.style.transformOrigin="50% 50%"),{dx:d,dy:h}},In=function(){let{map:e}=this,{dx:t,dy:n}=lt(this);e.style.transform=`translate(${t}px, ${n}px) scale(${this.scaleVal})`},Vn=function(e){e(this)},Kn=function(e){e.nodeObj.parent&&(this.clearSelection(),this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=e.nodeObj,this.initRight(),this.toCenter())},Yn=function(){this.isFocusMode=!1,this.tempDirection!==null&&(this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},qn=function(){this.direction=0,this.refresh(),this.toCenter()},zn=function(){this.direction=1,this.refresh(),this.toCenter()},Un=function(){this.direction=2,this.refresh(),this.toCenter()},Gn=function(e){this.locale=e,this.refresh()},Xn=function(e,t){let n=e.nodeObj;typeof t=="boolean"?n.expanded=t:n.expanded!==!1?n.expanded=!1:n.expanded=!0;let i=e.parentNode,o=i.children[1];if(o.expanded=n.expanded,o.className=n.expanded?"minus":"",X(e),n.expanded){let l=this.createChildren(n.children.map(a=>this.createWrapper(a).grp));i.parentNode.appendChild(l)}else i.parentNode.children[1].remove();this.linkDiv(e.closest("me-main > me-wrapper"));let r=e.getBoundingClientRect(),s=this.container.getBoundingClientRect();(r.bottom>s.bottom||r.top<s.top||r.right>s.right||r.left<s.left)&&this.scrollIntoView(e),this.bus.fire("expandNode",n)},Jn=function(e,t){let n=e.nodeObj;Y(n,t??!n.expanded),this.refresh()},Zn=function(e){this.clearSelection(),e&&(e=JSON.parse(JSON.stringify(e)),this.nodeData=e.nodeData,this.arrows=e.arrows||[],this.summaries=e.summaries||[],e.theme&&this.changeTheme(e.theme)),P(this.nodeData),this.layout(),this.linkDiv()},Qn=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:Yn,clearSelection:$n,disableEdit:Bn,enableEdit:Hn,expandNode:Xn,expandNodeAll:Jn,focusNode:Kn,getData:Pn,getDataString:On,initLeft:qn,initRight:zn,initSide:Un,install:Vn,move:Rn,refresh:Zn,scale:Wn,scaleFit:Fn,scrollIntoView:Ln,selectNode:Mn,selectNodes:Dn,setLocale:Gn,toCenter:In,unselectNodes:jn},Symbol.toStringTag,{value:"Module"})),ei=function(e){return{dom:e,moved:!1,pointerdown:!1,lastX:0,lastY:0,handlePointerMove(t){if(this.pointerdown){this.moved=!0;let n=t.clientX-this.lastX,i=t.clientY-this.lastY;this.lastX=t.clientX,this.lastY=t.clientY,this.cb&&this.cb(n,i)}},handlePointerDown(t){t.button===0&&(this.pointerdown=!0,this.lastX=t.clientX,this.lastY=t.clientY,this.dom.setPointerCapture(t.pointerId))},handleClear(t){this.pointerdown=!1,t.pointerId!==void 0&&this.dom.releasePointerCapture(t.pointerId)},cb:null,init(t,n){this.cb=n,this.handleClear=this.handleClear.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerDown=this.handlePointerDown.bind(this),this.destroy=Ee([{dom:t,evt:"pointermove",func:this.handlePointerMove},{dom:t,evt:"pointerleave",func:this.handleClear},{dom:t,evt:"pointerup",func:this.handleClear},{dom:this.dom,evt:"pointerdown",func:this.handlePointerDown}])},destroy:null,clear(){this.moved=!1,this.pointerdown=!1}}},Ve={create:ei},ti="#4dc4ff";function at(e,t,n,i,o,r,s,l){return{x:e/8+n*3/8+o*3/8+s/8,y:t/8+i*3/8+r*3/8+l/8}}function ni(e,t,n){E(e,{x:t+"",y:n+""})}function Q(e,t,n,i,o){E(e,{x1:t+"",y1:n+"",x2:i+"",y2:o+""})}function Ke(e,t,n,i,o,r,s,l,a,d){var h;if(e.line.setAttribute("d",`M ${t} ${n} C ${i} ${o} ${r} ${s} ${l} ${a}`),d.style){let c=d.style;c.stroke&&e.line.setAttribute("stroke",c.stroke),c.strokeWidth&&e.line.setAttribute("stroke-width",String(c.strokeWidth)),c.strokeDasharray&&e.line.setAttribute("stroke-dasharray",c.strokeDasharray),c.strokeLinecap&&e.line.setAttribute("stroke-linecap",c.strokeLinecap),c.opacity!==void 0&&e.line.setAttribute("opacity",String(c.opacity))}let f=oe(r,s,l,a);if(f&&(e.arrow1.setAttribute("d",`M ${f.x1} ${f.y1} L ${l} ${a} L ${f.x2} ${f.y2}`),d.style)){let c=d.style;c.stroke&&e.arrow1.setAttribute("stroke",c.stroke),c.strokeWidth&&e.arrow1.setAttribute("stroke-width",String(c.strokeWidth)),c.strokeLinecap&&e.arrow1.setAttribute("stroke-linecap",c.strokeLinecap),c.opacity!==void 0&&e.arrow1.setAttribute("opacity",String(c.opacity))}if(d.bidirectional){let c=oe(i,o,t,n);if(c&&(e.arrow2.setAttribute("d",`M ${c.x1} ${c.y1} L ${t} ${n} L ${c.x2} ${c.y2}`),d.style)){let m=d.style;m.stroke&&e.arrow2.setAttribute("stroke",m.stroke),m.strokeWidth&&e.arrow2.setAttribute("stroke-width",String(m.strokeWidth)),m.strokeLinecap&&e.arrow2.setAttribute("stroke-linecap",m.strokeLinecap),m.opacity!==void 0&&e.arrow2.setAttribute("opacity",String(m.opacity))}}let{x:p,y:u}=at(t,n,i,o,r,s,l,a);ni(e.label,p,u),(h=d.style)!=null&&h.labelColor&&e.label.setAttribute("fill",d.style.labelColor),di(e)}function le(e,t,n){let{offsetLeft:i,offsetTop:o}=H(e.nodes,t),r=t.offsetWidth,s=t.offsetHeight,l=i+r/2,a=o+s/2,d=l+n.x,h=a+n.y;return{w:r,h:s,cx:l,cy:a,ctrlX:d,ctrlY:h}}function K(e){let t,n,i=(e.cy-e.ctrlY)/(e.ctrlX-e.cx);return i>e.h/e.w||i<-e.h/e.w?e.cy-e.ctrlY<0?(t=e.cx-e.h/2/i,n=e.cy+e.h/2):(t=e.cx+e.h/2/i,n=e.cy-e.h/2):e.cx-e.ctrlX<0?(t=e.cx+e.w/2,n=e.cy-e.w*i/2):(t=e.cx-e.w/2,n=e.cy+e.w*i/2),{x:t,y:n}}var _e=function(e,t,n,i,o){var r;if(!t||!n)return;let s=le(e,t,i.delta1),l=le(e,n,i.delta2),{x:a,y:d}=K(s),{ctrlX:h,ctrlY:f}=s,{ctrlX:p,ctrlY:u}=l,{x:c,y:m}=K(l),v=oe(p,u,c,m);if(!v)return;let g=`M ${v.x1} ${v.y1} L ${c} ${m} L ${v.x2} ${v.y2}`,y="";if(i.bidirectional){let S=oe(h,f,a,d);if(!S)return;y=`M ${S.x1} ${S.y1} L ${a} ${d} L ${S.x2} ${S.y2}`}let b=Pt(`M ${a} ${d} C ${h} ${f} ${p} ${u} ${c} ${m}`,g,y,i.style),{x:N,y:C}=at(a,d,h,f,p,u,c,m),w=(r=i.style)==null?void 0:r.labelColor,x=ue(i.label,N,C,{anchor:"middle",color:w,dataType:"custom-link"});b.appendChild(x),b.label=x,b.arrowObj=i,b.dataset.linkid=i.id,e.linkSvgGroup.appendChild(b),o||(e.arrows.push(i),e.currentArrow=b,ct(e,i,s,l))},ii=function(e,t,n={}){let i={id:I(),label:"Custom Link",from:e.nodeObj.id,to:t.nodeObj.id,delta1:{x:e.offsetWidth/2+100,y:0},delta2:{x:t.offsetWidth/2+100,y:0},...n};_e(this,e,t,i),this.bus.fire("operation",{name:"createArrow",obj:i})},oi=function(e){ce(this);let t={...e,id:I()};_e(this,this.findEle(t.from),this.findEle(t.to),t),this.bus.fire("operation",{name:"createArrow",obj:t})},ri=function(e){let t;if(e?t=e:t=this.currentArrow,!t)return;ce(this);let n=t.arrowObj.id;this.arrows=this.arrows.filter(i=>i.id!==n),t.remove(),this.bus.fire("operation",{name:"removeArrow",obj:{id:n}})},si=function(e){this.currentArrow=e;let t=e.arrowObj,n=this.findEle(t.from),i=this.findEle(t.to),o=le(this,n,t.delta1),r=le(this,i,t.delta2);ct(this,t,o,r)},li=function(){ce(this),this.currentArrow=null},he=function(e,t){let n=document.createElementNS(A,"path");return E(n,{d:e,stroke:t,fill:"none","stroke-width":"6","stroke-linecap":"round","stroke-linejoin":"round"}),n},ai=function(e,t){let n=document.createElementNS(A,"g");n.setAttribute("class","arrow-highlight"),n.setAttribute("opacity","0.45");let i=he(e.line.getAttribute("d"),t);n.appendChild(i);let o=he(e.arrow1.getAttribute("d"),t);if(n.appendChild(o),e.arrow2.getAttribute("d")){let r=he(e.arrow2.getAttribute("d"),t);n.appendChild(r)}e.insertBefore(n,e.firstChild)},ci=function(e){let t=e.querySelector(".arrow-highlight");t&&t.remove()},di=function(e){let t=e.querySelector(".arrow-highlight");if(!t)return;let n=t.querySelectorAll("path");n.length>=1&&n[0].setAttribute("d",e.line.getAttribute("d")),n.length>=2&&n[1].setAttribute("d",e.arrow1.getAttribute("d")),n.length>=3&&e.arrow2.getAttribute("d")&&n[2].setAttribute("d",e.arrow2.getAttribute("d"))},ce=function(e){var t,n;(t=e.helper1)==null||t.destroy(),(n=e.helper2)==null||n.destroy(),e.linkController.style.display="none",e.P2.style.display="none",e.P3.style.display="none",e.currentArrow&&ci(e.currentArrow)},ct=function(e,t,n,i){let{linkController:o,P2:r,P3:s,line1:l,line2:a,nodes:d,map:h,currentArrow:f,bus:p}=e;if(!f)return;o.style.display="initial",r.style.display="initial",s.style.display="initial",d.appendChild(o),d.appendChild(r),d.appendChild(s),ai(f,ti);let{x:u,y:c}=K(n),{ctrlX:m,ctrlY:v}=n,{ctrlX:g,ctrlY:y}=i,{x:b,y:N}=K(i);r.style.cssText=`top:${v}px;left:${m}px;`,s.style.cssText=`top:${y}px;left:${g}px;`,Q(l,u,c,m,v),Q(a,g,y,b,N),e.helper1=Ve.create(r),e.helper2=Ve.create(s),e.helper1.init(h,(C,w)=>{m=m+C/e.scaleVal,v=v+w/e.scaleVal;let x=K({...n,ctrlX:m,ctrlY:v});u=x.x,c=x.y,r.style.top=v+"px",r.style.left=m+"px",Ke(f,u,c,m,v,g,y,b,N,t),Q(l,u,c,m,v),t.delta1.x=m-n.cx,t.delta1.y=v-n.cy,p.fire("updateArrowDelta",t)}),e.helper2.init(h,(C,w)=>{g=g+C/e.scaleVal,y=y+w/e.scaleVal;let x=K({...i,ctrlX:g,ctrlY:y});b=x.x,N=x.y,s.style.top=y+"px",s.style.left=g+"px",Ke(f,u,c,m,v,g,y,b,N,t),Q(a,g,y,b,N),t.delta2.x=g-i.cx,t.delta2.y=y-i.cy,p.fire("updateArrowDelta",t)})};function hi(){this.linkSvgGroup.innerHTML="";for(let e=0;e<this.arrows.length;e++){let t=this.arrows[e];try{_e(this,this.findEle(t.from),this.findEle(t.to),t,!0)}catch{}}this.nodes.appendChild(this.linkSvgGroup)}function pi(e){if(ce(this),!e)return;let t=e.label;Je(this,t,e.arrowObj)}function ui(){this.arrows=this.arrows.filter(e=>ie(e.from,this.nodeData)&&ie(e.to,this.nodeData))}var fi=Object.freeze(Object.defineProperty({__proto__:null,createArrow:ii,createArrowFrom:oi,editArrowLabel:pi,removeArrow:ri,renderArrow:hi,selectArrow:si,tidyArrow:ui,unselectArrow:li},Symbol.toStringTag,{value:"Module"})),mi=function(e){var t,n;if(e.length===0)throw new Error("No selected node.");if(e.length===1){let h=e[0].nodeObj,f=e[0].nodeObj.parent;if(!f)throw new Error("Can not select root node.");let p=f.children.findIndex(u=>h===u);return{parent:f.id,start:p,end:p}}let i=0,o=e.map(h=>{let f=h.nodeObj,p=[];for(;f.parent;){let u=f.parent,c=u.children,m=c?.indexOf(f);f=u,p.unshift({node:f,index:m})}return p.length>i&&(i=p.length),p}),r=0;e:for(;r<i;r++){let h=(t=o[0][r])==null?void 0:t.node;for(let f=1;f<o.length;f++)if(((n=o[f][r])==null?void 0:n.node)!==h)break e}if(!r)throw new Error("Can not select root node.");let s=o.map(h=>h[r-1].index).sort(),l=s[0]||0,a=s[s.length-1]||0,d=o[0][r-1].node;if(!d.parent)throw new Error("Please select nodes in the same main topic.");return{parent:d.id,start:l,end:a}},gi=function(e){let t=document.createElementNS(A,"g");return t.setAttribute("id",e),t},Ye=function(e,t){let n=document.createElementNS(A,"path");return E(n,{d:e,stroke:t||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),n},vi=e=>e.parentElement.parentElement,yi=function(e,{parent:t,start:n}){let i=e.findEle(t),o=i.nodeObj,r;return o.parent?r=i.closest("me-main").className:r=e.findEle(o.children[n].id).closest("me-main").className,r},Te=function(e,t){var n;let{id:i,label:o,parent:r,start:s,end:l}=t,{nodes:a,theme:d,summarySvg:h}=e,f=e.findEle(r).nodeObj,p=yi(e,t),u=1/0,c=0,m=0,v=0;for(let S=s;S<=l;S++){let k=(n=f.children)==null?void 0:n[S];if(!k)return e.removeSummary(i),null;let j=vi(e.findEle(k.id)),{offsetLeft:B,offsetTop:z}=H(a,j),Ae=s===l?10:20;S===s&&(m=z+Ae),S===l&&(v=z+j.offsetHeight-Ae),B<u&&(u=B),j.offsetWidth+B>c&&(c=j.offsetWidth+B)}let g,y,b=m+10,N=v+10,C=(b+N)/2,w=d.cssVar["--color"];p===M.LHS?(g=Ye(`M ${u+10} ${b} c -5 0 -10 5 -10 10 L ${u} ${N-10} c 0 5 5 10 10 10 M ${u} ${C} h -10`,w),y=ue(o,u-20,C+6,{anchor:"end",color:w})):(g=Ye(`M ${c-10} ${b} c 5 0 10 5 10 10 L ${c} ${N-10} c 0 5 -5 10 -10 10 M ${c} ${C} h 10`,w),y=ue(o,c+20,C+6,{anchor:"start",color:w}));let x=gi("s-"+i);return x.appendChild(g),x.appendChild(y),x.summaryObj=t,h.appendChild(x),x},bi=function(){if(!this.currentNodes)return;let{currentNodes:e,summaries:t,bus:n}=this,{parent:i,start:o,end:r}=mi(e),s={id:I(),parent:i,start:o,end:r,label:"summary"},l=Te(this,s);t.push(s),this.editSummary(l),n.fire("operation",{name:"createSummary",obj:s})},wi=function(e){let t=I(),n={...e,id:t};Te(this,n),this.summaries.push(n),this.bus.fire("operation",{name:"createSummary",obj:n})},xi=function(e){var t;let n=this.summaries.findIndex(i=>i.id===e);n>-1&&(this.summaries.splice(n,1),(t=document.querySelector("#s-"+e))==null||t.remove()),this.bus.fire("operation",{name:"removeSummary",obj:{id:e}})},Si=function(e){let t=e.children[1].getBBox(),n=6,i=3,o=document.createElementNS(A,"rect");E(o,{x:t.x-n+"",y:t.y-n+"",width:t.width+n*2+"",height:t.height+n*2+"",rx:i+"",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),e.appendChild(o),this.currentSummary=e},Ei=function(){var e,t;(t=(e=this.currentSummary)==null?void 0:e.querySelector("rect"))==null||t.remove(),this.currentSummary=null},Ci=function(){this.summarySvg.innerHTML="",this.summaries.forEach(e=>{try{Te(this,e)}catch{}}),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},Ni=function(e){if(!e)return;let t=e.childNodes[1];Je(this,t,e.summaryObj)},ki=Object.freeze(Object.defineProperty({__proto__:null,createSummary:bi,createSummaryFrom:wi,editSummary:Ni,removeSummary:xi,renderSummary:Ci,selectSummary:Si,unselectSummary:Ei},Symbol.toStringTag,{value:"Module"})),_="http://www.w3.org/2000/svg";function _i(e,t){let n=document.createElementNS(_,"svg");return E(n,{version:"1.1",xmlns:_,height:e,width:t}),n}function Ti(e,t){return(parseInt(e)-parseInt(t))/2}function Ai(e,t,n,i){let o=document.createElementNS(_,"g"),r="";return e.text?r=e.text.textContent:r=e.childNodes[0].textContent,r.split(`
`).forEach((s,l)=>{let a=document.createElementNS(_,"text");E(a,{x:n+parseInt(t.paddingLeft)+"",y:i+parseInt(t.paddingTop)+Ti(t.lineHeight,t.fontSize)*(l+1)+parseFloat(t.fontSize)*(l+1)+"","text-anchor":"start","font-family":t.fontFamily,"font-size":`${t.fontSize}`,"font-weight":`${t.fontWeight}`,fill:`${t.color}`}),a.innerHTML=s,o.appendChild(a)}),o}function Li(e,t,n,i){var o;let r="";(o=e.nodeObj)!=null&&o.dangerouslySetInnerHTML?r=e.nodeObj.dangerouslySetInnerHTML:e.text?r=e.text.textContent:r=e.childNodes[0].textContent;let s=document.createElementNS(_,"foreignObject");E(s,{x:n+parseInt(t.paddingLeft)+"",y:i+parseInt(t.paddingTop)+"",width:t.width,height:t.height});let l=document.createElement("div");return E(l,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${t.fontFamily}; font-size: ${t.fontSize}; font-weight: ${t.fontWeight}; color: ${t.color}; white-space: pre-wrap;`}),l.innerHTML=r,s.appendChild(l),s}function Mi(e,t){let n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=H(e.nodes,t),r=document.createElementNS(_,"rect");return E(r,{x:i+"",y:o+"",rx:n.borderRadius,ry:n.borderRadius,width:n.width,height:n.height,fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth}),r}function ee(e,t,n=!1){let i=getComputedStyle(t),{offsetLeft:o,offsetTop:r}=H(e.nodes,t),s=document.createElementNS(_,"rect");E(s,{x:o+"",y:r+"",rx:i.borderRadius,ry:i.borderRadius,width:i.width,height:i.height,fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.borderWidth});let l=document.createElementNS(_,"g");l.appendChild(s);let a;return n?a=Li(t,i,o,r):a=Ai(t,i,o,r),l.appendChild(a),l}function Di(e,t){let n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=H(e.nodes,t),r=document.createElementNS(_,"a"),s=document.createElementNS(_,"text");return E(s,{x:i+"",y:o+parseInt(n.fontSize)+"","text-anchor":"start","font-family":n.fontFamily,"font-size":`${n.fontSize}`,"font-weight":`${n.fontWeight}`,fill:`${n.color}`}),s.innerHTML=t.textContent,r.appendChild(s),r.setAttribute("href",t.href),r}function ji(e,t){let n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=H(e.nodes,t),r=document.createElementNS(_,"image");return E(r,{x:i+"",y:o+"",width:n.width+"",height:n.height+"",href:t.src}),r}var te=100,$i='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',Oi=(e,t=!1)=>{var n,i,o;let r=e.nodes,s=r.offsetHeight+te*2,l=r.offsetWidth+te*2,a=_i(s+"px",l+"px"),d=document.createElementNS(_,"svg"),h=document.createElementNS(_,"rect");E(h,{x:"0",y:"0",width:`${l}`,height:`${s}`,fill:e.theme.cssVar["--bgcolor"]}),a.appendChild(h),r.querySelectorAll(".subLines").forEach(c=>{let m=c.cloneNode(!0),{offsetLeft:v,offsetTop:g}=H(r,c.parentElement);m.setAttribute("x",`${v}`),m.setAttribute("y",`${g}`),d.appendChild(m)});let f=(n=r.querySelector(".lines"))==null?void 0:n.cloneNode(!0);f&&d.appendChild(f);let p=(i=r.querySelector(".topiclinks"))==null?void 0:i.cloneNode(!0);p&&d.appendChild(p);let u=(o=r.querySelector(".summary"))==null?void 0:o.cloneNode(!0);return u&&d.appendChild(u),r.querySelectorAll("me-tpc").forEach(c=>{c.nodeObj.dangerouslySetInnerHTML?d.appendChild(ee(e,c,!t)):(d.appendChild(Mi(e,c)),d.appendChild(ee(e,c.text,!t)))}),r.querySelectorAll(".tags > span").forEach(c=>{d.appendChild(ee(e,c))}),r.querySelectorAll(".icons > span").forEach(c=>{d.appendChild(ee(e,c))}),r.querySelectorAll(".hyper-link").forEach(c=>{d.appendChild(Di(e,c))}),r.querySelectorAll("img").forEach(c=>{d.appendChild(ji(e,c))}),E(d,{x:te+"",y:te+"",overflow:"visible"}),a.appendChild(d),a},Pi=(e,t)=>(t&&e.insertAdjacentHTML("afterbegin","<style>"+t+"</style>"),$i+e.outerHTML);function Hi(e){return new Promise((t,n)=>{let i=new FileReader;i.onload=o=>{t(o.target.result)},i.onerror=o=>{n(o)},i.readAsDataURL(e)})}var Bi=function(e=!1,t){let n=Oi(this,e),i=Pi(n,t);return new Blob([i],{type:"image/svg+xml"})},Wi=async function(e=!1,t){let n=this.exportSvg(e,t),i=await Hi(n);return new Promise((o,r)=>{let s=new Image;s.setAttribute("crossOrigin","anonymous"),s.onload=()=>{let l=document.createElement("canvas");l.width=s.width,l.height=s.height,l.getContext("2d").drawImage(s,0,0),l.toBlob(o,"image/png",1)},s.src=i,s.onerror=r})},Fi=Object.freeze(Object.defineProperty({__proto__:null,exportPng:Wi,exportSvg:Bi},Symbol.toStringTag,{value:"Module"}));function Ri(e,t){return async function(...n){let i=this.before[t];i&&!await i.apply(this,n)||e.apply(this,n)}}var qe=Object.keys(st),dt={};for(let e=0;e<qe.length;e++){let t=qe[e];dt[t]=Ri(st[t],t)}var Ii={getObjById:ie,generateNewObj:bt,layout:Tt,linkDiv:Ht,editTopic:Ot,createWrapper:Mt,createParent:Dt,createChildren:jt,createTopic:$t,findEle:Ue,changeTheme:an,...Qn,...dt,...fi,...ki,...Fi,init(e){if(e=JSON.parse(JSON.stringify(e)),!e||!e.nodeData)return new Error("MindElixir: `data` is required");e.direction!==void 0&&(this.direction=e.direction),this.changeTheme(e.theme||this.theme,!1),this.nodeData=e.nodeData,P(this.nodeData),this.arrows=e.arrows||[],this.summaries=e.summaries||[],this.tidyArrow(),this.toolBar&&en(this),this.keypress&&Nt(this,this.keypress),this.editable&&ln(this),this.contextMenu&&this.disposable.push(Bt(this,this.contextMenu)),this.draggable&&this.disposable.push(Rt(this)),this.allowUndo&&this.disposable.push(Vt(this)),this.layout(),this.linkDiv(),this.toCenter()},destroy(){var e;this.disposable.forEach(t=>t()),this.el&&(this.el.innerHTML=""),this.el=void 0,this.nodeData=void 0,this.arrows=void 0,this.summaries=void 0,this.currentArrow=void 0,this.currentNodes=void 0,this.currentSummary=void 0,this.waitCopy=void 0,this.theme=void 0,this.direction=void 0,this.bus=void 0,this.container=void 0,this.map=void 0,this.lines=void 0,this.linkController=void 0,this.linkSvgGroup=void 0,this.P2=void 0,this.P3=void 0,this.line1=void 0,this.line2=void 0,this.nodes=void 0,(e=this.selection)==null||e.destroy(),this.selection=void 0}};function Vi({pT:e,pL:t,pW:n,pH:i,cT:o,cL:r,cW:s,cH:l,direction:a,containerHeight:d}){let h=t+n/2,f=e+i/2,p;a===M.LHS?p=r+s:p=r;let u=o+l/2,c=(1-Math.abs(u-f)/d)*.25*(n/2);return a===M.LHS?h=h-n/10-c:h=h+n/10+c,`M ${h} ${f} Q ${h} ${u} ${p} ${u}`}function Ki({pT:e,pL:t,pW:n,pH:i,cT:o,cL:r,cW:s,cH:l,direction:a,isFirst:d}){let h=parseInt(this.container.style.getPropertyValue("--node-gap-x")),f=0,p=0;d?f=e+i/2:f=e+i;let u=o+l,c=0,m=0,v=0,g=Math.abs(f-u)/300*h;return a===M.LHS?(v=t,c=v+h,m=v-h,p=r+h,`M ${c} ${f} C ${v} ${f} ${v+g} ${u} ${m} ${u} H ${p}`):(v=t+n,c=v-h,m=v+h,p=r+s-h,`M ${c} ${f} C ${v} ${f} ${v-g} ${u} ${m} ${u} H ${p}`)}var Yi="5.0.5";function qi(e){return{x:0,y:0,moved:!1,mousedown:!1,onMove(t,n){this.mousedown&&(this.moved=!0,e.move(t,n))},clear(){this.mousedown=!1,e.map.style.transition="transform 0.3s"}}}var U=document;function D({el:e,direction:t,locale:n,draggable:i,editable:o,contextMenu:r,toolBar:s,keypress:l,mouseSelectionButton:a,selectionContainer:d,before:h,newTopicName:f,allowUndo:p,generateMainBranch:u,generateSubBranch:c,overflowHidden:m,theme:v,alignment:g,scaleSensitivity:y,scaleMax:b,scaleMin:N,handleWheel:C}){let w=null,x=Object.prototype.toString.call(e);if(x==="[object HTMLDivElement]"?w=e:x==="[object String]"&&(w=document.querySelector(e)),!w)throw new Error("MindElixir: el is not a valid element");w.style.position="relative",w.innerHTML="",this.el=w,this.disposable=[],this.before=h||{},this.locale=n||"en",this.newTopicName=f||"New Node",this.contextMenu=r??!0,this.toolBar=s??!0,this.keypress=l??!0,this.mouseSelectionButton=a??0,this.direction=t??1,this.draggable=i??!0,this.editable=o??!0,this.allowUndo=p??!0,this.scaleSensitivity=y??.1,this.scaleMax=b??1.4,this.scaleMin=N??.2,this.generateMainBranch=u||Vi,this.generateSubBranch=c||Ki,this.overflowHidden=m??!1,this.alignment=g??"root",this.handleWheel=C??!0,this.currentNodes=[],this.currentArrow=null,this.scaleVal=1,this.tempDirection=null,this.dragMoveHelper=qi(this),this.bus=_t(),this.container=U.createElement("div"),this.selectionContainer=d||this.container,this.container.className="map-container";let S=window.matchMedia("(prefers-color-scheme: dark)");this.theme=v||(S.matches?we:be);let k=U.createElement("div");k.className="map-canvas",setTimeout(()=>{k.style.transition="all 0.3s"},300),this.map=k,this.container.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.el.appendChild(this.container),this.nodes=U.createElement("me-nodes"),this.lines=G("lines"),this.summarySvg=G("summary"),this.linkController=G("linkcontroller"),this.P2=U.createElement("div"),this.P3=U.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=De(),this.line2=De(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=G("topiclinks"),this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":this.disposable.push(kt(this))}D.prototype=Ii;Object.defineProperty(D.prototype,"currentNode",{get(){return this.currentNodes[this.currentNodes.length-1]},enumerable:!0});D.LEFT=0;D.RIGHT=1;D.SIDE=2;D.THEME=be;D.DARK_THEME=we;D.version=Yi;D.E=Ue;D.new=e=>({nodeData:{id:I(),topic:e||"new topic",children:[]}});return gt(zi);})();
/*! Bundled license information:

mind-elixir/dist/MindElixir.js:
  (*! @viselect/vanilla v3.9.0 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla *)
*/
