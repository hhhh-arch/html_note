<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥å…·æ åŠ¨ç”»æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 50px;
            background: #f5f5f5;
        }
        
        .test-highlight {
            background: #ffeb3b;
            padding: 10px;
            margin: 20px 0;
            border-radius: 4px;
            cursor: pointer;
            display: inline-block;
        }
        
        /* æµ®åŠ¨å·¥å…·æ æ ·å¼ */
        .html-note-toolbar-float {
            position: absolute;
            display: flex;
            align-items: center;
            background: #232734;
            border-radius: 12px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.22);
            padding: 6px 14px;
            gap: 8px;
            z-index: 10020;
            /* åˆå§‹çŠ¶æ€ï¼šå‘ä¸Šåç§»ï¼Œå‡†å¤‡å‘ä¸‹æ»‘åŠ¨ */
            transform: translate(0, -120%);
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.3s ease;
            opacity: 0;
        }
        
        .html-note-toolbar-float.show {
            transform: translate(0, 0);
            opacity: 1;
            /* æ·»åŠ è½»å¾®çš„å¼¹æ€§æ•ˆæœ */
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.3s ease;
        }
        
        .toolbar-float-btn {
            background: none;
            border: none;
            outline: none;
            border-radius: 6px;
            width: 32px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.18s, box-shadow 0.18s;
            color: #fff;
            font-size: 18px;
            margin: 0 2px;
        }
        
        .toolbar-float-btn:hover {
            background: #35394a;
            box-shadow: 0 2px 8px rgba(0,0,0,0.18);
        }
    </style>
</head>
<body>
    <h1>å·¥å…·æ æ»‘åŠ¨åŠ¨ç”»æµ‹è¯•</h1>
    <p>ç‚¹å‡»ä¸‹é¢çš„é«˜äº®æ–‡æœ¬ï¼ŒæŸ¥çœ‹å·¥å…·æ çš„æ»‘åŠ¨åŠ¨ç”»æ•ˆæœï¼š</p>
    
    <div class="test-highlight" onclick="showToolbar(this, event)">
        è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é«˜äº®æ–‡æœ¬ï¼Œç‚¹å‡»æˆ‘æŸ¥çœ‹å·¥å…·æ åŠ¨ç”»æ•ˆæœ
    </div>
    
    <div class="test-highlight" onclick="showToolbar(this, event)">
        å¦ä¸€ä¸ªæµ‹è¯•é«˜äº®æ–‡æœ¬ï¼Œå·¥å…·æ ä¼šä»ä¸Šæ–¹æ»‘ä¸‹æ¥
    </div>
    
    <script>
        function showToolbar(highlightElement, mouseEvent) {
            // ç§»é™¤å·²å­˜åœ¨çš„å·¥å…·æ 
            document.querySelectorAll('.html-note-toolbar-float').forEach(el => el.remove());
            
            // åˆ›å»ºå·¥å…·æ å®¹å™¨
            const toolbar = document.createElement('div');
            toolbar.className = 'html-note-toolbar-float';
            
            // è®¡ç®—å·¥å…·æ ä½ç½®
            const rect = highlightElement.getBoundingClientRect();
            const scrollX = window.pageXOffset || document.documentElement.scrollLeft;
            const scrollY = window.pageYOffset || document.documentElement.scrollTop;
            
            // å·¥å…·æ ä¸­å¿ƒå¯¹å‡†ç‚¹å‡»ä½ç½®
            const left = mouseEvent.clientX + scrollX - 90; // 90 = toolbarå®½åº¦ä¸€åŠ
            const top = mouseEvent.clientY + scrollY - 50;
            
            // è®¾ç½®å·¥å…·æ ä½ç½®
            toolbar.style.left = `${left}px`;
            toolbar.style.top = `${top}px`;
            
            // åˆ›å»ºæŒ‰é’®
            const colorBtn = document.createElement('button');
            colorBtn.className = 'toolbar-float-btn';
            colorBtn.innerHTML = 'ğŸ¨';
            colorBtn.title = 'æ›´æ”¹é¢œè‰²';
            
            const copyBtn = document.createElement('button');
            copyBtn.className = 'toolbar-float-btn';
            copyBtn.innerHTML = 'ğŸ“‹';
            copyBtn.title = 'å¤åˆ¶æ–‡æœ¬';
            
            const noteBtn = document.createElement('button');
            noteBtn.className = 'toolbar-float-btn';
            noteBtn.innerHTML = 'ğŸ“';
            noteBtn.title = 'æ·»åŠ ç¬”è®°';
            
            const delBtn = document.createElement('button');
            delBtn.className = 'toolbar-float-btn';
            delBtn.innerHTML = 'ğŸ—‘ï¸';
            delBtn.title = 'åˆ é™¤é«˜äº®';
            
            // æ·»åŠ æŒ‰é’®åˆ°å·¥å…·æ 
            toolbar.append(colorBtn, copyBtn, noteBtn, delBtn);
            document.body.appendChild(toolbar);
            
            // ä½¿ç”¨ requestAnimationFrame ç¡®ä¿DOMå·²æ¸²æŸ“ï¼Œç„¶åæ·»åŠ æ»‘åŠ¨ç‰¹æ•ˆ
            requestAnimationFrame(() => {
                toolbar.classList.add('show');
            });
            
            // ç‚¹å‡»å¤–éƒ¨å…³é—­å·¥å…·æ 
            setTimeout(() => {
                document.addEventListener('mousedown', function closeToolbar(ev) {
                    if (!toolbar.contains(ev.target) && !highlightElement.contains(ev.target)) {
                        toolbar.remove();
                        document.removeEventListener('mousedown', closeToolbar);
                    }
                });
            }, 10);
        }
    </script>
</body>
</html> 